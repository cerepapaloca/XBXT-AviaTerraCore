package net.atcore.security;

import lombok.experimental.UtilityClass;
import net.atcore.Config;
import net.atcore.messages.CategoryMessages;
import net.atcore.messages.MessagesManager;
import net.atcore.messages.TypeMessages;
import net.atcore.utils.GlobalUtils;
import org.bukkit.Material;
import org.bukkit.inventory.Inventory;
import org.bukkit.inventory.ItemStack;
import org.bukkit.persistence.PersistentDataType;

@Deprecated
@UtilityClass
public final class AntiExploit {

    /**
     * Elimina todos los tag de rangos que sea mÃ¡s antiguo que {@link Config#getPurgeTagRange()}
     * esto es un por si acaso
     */

    public static void checkRangePurge(Inventory inventory){
        for (ItemStack item : inventory.getContents()){
            if (item == null) continue;
            if (!item.getType().equals(Material.NAME_TAG)) continue;
            Long date = (Long) GlobalUtils.getPersistenData(item, "dateCreationRange", PersistentDataType.LONG);
            if (date == null)continue;
            if (date > Config.getPurgeTagRange()) continue;
            item.setAmount(0);
            MessagesManager.logConsole("Tag Eliminada", TypeMessages.INFO, CategoryMessages.PLAY);
        }
    }



}
